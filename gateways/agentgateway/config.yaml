# Top-level config settings
config:
  adminAddr: '0.0.0.0:15000'
  tracing:
    otlpEndpoint: http://host.docker.internal:4317
    randomSampling: true

binds:
  - port: 3847
    listeners:
      - name: mcp-gateway
        routes:
          - name: mcp-tools
            policies:
              cors:
                allowOrigins:
                  - '*'
                allowHeaders:
                  - '*'
            backends:
              # Backend 1: SSE-proxied stdio MCPs (stateless - auto-reinitializes sessions)
              - mcp:
                  statefulMode: stateless
                  targets:
                    - name: sequential-thinking
                      sse:
                        host: http://host.docker.internal:7030/servers/sequential-thinking/sse
                    - name: memory
                      sse:
                        host: http://host.docker.internal:7030/servers/memory/sse
                    - name: kapture
                      sse:
                        host: http://host.docker.internal:7030/servers/kapture/sse
                    # Photoshop MCP (via stdio-proxy)
                    - name: photoshop
                      sse:
                        host: http://host.docker.internal:7030/servers/photoshop/sse
                    # Qdrant RAG (standalone container - multi-collection)
                    - name: qdrant-work
                      sse:
                        host: http://host.docker.internal:7020/servers/qdrant-work/sse
                    - name: qdrant-personal
                      sse:
                        host: http://host.docker.internal:7020/servers/qdrant-personal/sse
                    - name: context7
                      mcp:
                        host: http://host.docker.internal:7008/mcp
                    - name: playwright
                      sse:
                        host: http://host.docker.internal:7007/sse
                    - name: browser-use
                      sse:
                        host: http://host.docker.internal:7011/sse
                    - name: hass-mcp
                      sse:
                        host: http://host.docker.internal:7010/sse
                    # TODO: Fix langfuse-prompts - needs langfuse stack running on :3101
                    # - name: langfuse-prompts
                    #   mcp:
                    #     host: http://host.docker.internal:3101/api/public/mcp
                    # TODO: Fix obsidian MCP - needs Obsidian running with semantic plugin on :3001
                    # - name: obsidian
                    #   mcp:
                    #     host: http://host.docker.internal:3001/mcp
